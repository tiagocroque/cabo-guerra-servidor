<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cabo de Guerra DEBUG</title>
  <style>body{font-family:Arial;background:#1e272e;color:#fff;padding:20px;}#debug{color:#f39c12;font-family:monospace;}</style>
  <script src="https://cdn.socket.io/4.8.0/socket.io.min.js"></script>
</head>
<body>
  <h1>üîß DEBUG Cabo de Guerra</h1>
  <div id="debug">Status: Iniciando...</div>
  <br>
  Nome: <input id="name" placeholder="Seu nome"><br>
  Grupo: 
  <select id="group">
    <option>Grupo 1</option><option>Grupo 2</option><option>Grupo 3</option><option>Grupo 4</option>
    <option>Grupo 5</option><option>Grupo 6</option><option>Grupo 7</option><option>Grupo 8</option>
  </select><br><br>
  <button onclick="joinGame()">Entrar no Jogo</button>
  <button onclick="startGame()">Iniciar Jogo (senha Marista)</button>

  <script>
    const SERVER_URL = "https://cabo-guerra-servidor.onrender.com";
    const socket = io(SERVER_URL, {
      transports: ['websocket', 'polling'],
      timeout: 10000
    });
    
    socket.on('connect', () => {
      document.getElementById('debug').innerHTML = '‚úÖ SOCKET CONECTADO! Pode jogar.';
      document.getElementById('debug').style.color = '#44bd32';
    });
    
    socket.on('connect_error', (err) => {
      document.getElementById('debug').innerHTML = '‚ùå ERRO CONEX√ÉO: ' + err.message;
      document.getElementById('debug').style.color = '#e84118';
    });
    
    socket.on('joined', (data) => {
      document.getElementById('debug').innerHTML += '<br>‚úÖ ENTROU: ' + JSON.stringify(data);
    });
    
    socket.on('newQuestion', (data) => {
      document.getElementById('debug').innerHTML += '<br>üìù NOVA QUEST√ÉO: ' + JSON.stringify(data);
    });
    
    function joinGame() {
      const name = document.getElementById('name').value;
      const group = document.getElementById('group').value;
      socket.emit('join', { name, group });
      document.getElementById('debug').innerHTML += '<br>üì§ Enviado JOIN: ' + name + ' (' + group + ')';
    }
    
    function startGame() {
      const senha = prompt('Senha Professor:');
      if (senha === 'Marista') {
        socket.emit('startGame');
        document.getElementById('debug').innerHTML += '<br>üöÄ Enviado START GAME';
      } else {
        alert('Senha errada!');
      }
    }
  </script>
</body>
</html>
